syntax = "proto3";

option java_multiple_files = true;
option java_package = "com.multicloud.ba.grpc";
option java_outer_classname = "LoadProto";

service LoadService {
  rpc Unary(LoadParams) returns (StreamEvent);
  rpc Stream(LoadParams) returns (stream StreamEvent);
}

message LoadParams {
  int32  duration_sec   = 1;
  double msg_per_sec    = 2;
  int32  payload_bytes  = 3;
  int32  jitter_ms      = 4;
  int32  fail_after_sec = 5;
}

message StreamEvent {
  int64 seq      = 1;
  int64 ts_ms    = 2;
  bytes payload  = 3;
  double cpu_load = 4;
  int64 heap_used = 5;
}
